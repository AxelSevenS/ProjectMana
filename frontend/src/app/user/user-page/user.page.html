<ion-content *ngIf="user" [fullscreen]="true">
  <ion-header>
    <ion-toolbar>
      <ion-title>
        <ng-template [ngIf]="isOwner" [ngIfElse]="notOwner">Votre Profil</ng-template>
        <ng-template #notOwner>Profile de {{ user.username }}</ng-template>
      </ion-title>
    </ion-toolbar>
  </ion-header>
  
  <ion-item *ngIf="this.user">
    <ion-col>
      <form [formGroup]="editUserForm" (submit)="onSubmit()">
        
        <ng-template [ngIf]="this.isOwner" [ngIfElse]="isNotOwner">
          
          <ion-item lines="full">
            <ion-input formControlName="username" type="text" label="Nom d'Utilisateur" labelPlacement="floating"></ion-input>
          </ion-item>
          
          <ion-item lines="full">
            <ion-input formControlName="password" type="password" [clearOnEdit]="false" label="Mot de Passe" labelPlacement="floating" errorText="Mot de Passe invalide"></ion-input>
          </ion-item>
          
          <ion-item lines="full">
            <ion-input formControlName="passwordConfirm" type="password" [clearOnEdit]="false" label="Confirmer le Mot de Passe" labelPlacement="floating" errorText="Mot de Passe invalide"></ion-input>
          </ion-item>
          
        </ng-template>
        <ng-template #isNotOwner>
          
          <ion-item lines="full">
            <ion-label position="stacked">Nom d'Utilisateur</ion-label>
            <ion-text>{{ this.user.username }}</ion-text>
          </ion-item>
          
        </ng-template>
        
        <ion-item lines="full">
          <ion-label position="stacked">Rôle</ion-label>
          
          <ng-template [ngIf]="this.isAdmin" [ngIfElse]="isNotAdmin">
            <ion-select placeholder="Rôle" [value]="this.user.roles" labelPlacement="stacked">
              <ion-select-option value="Admin">Admin</ion-select-option>
              <ion-select-option value="Client">Client</ion-select-option>
            </ion-select>
          </ng-template>
          <ng-template #isNotAdmin>
            <ion-text>{{ this.user.roles }}</ion-text>
          </ng-template>
        </ion-item>
        
        <ion-list *ngIf="this.isOwner || this.isAdmin">
          <ion-row>
            <ion-col>
              <ion-button type="submit" expand="block">
                Sauvegarder
              </ion-button>
            </ion-col>
          </ion-row>
        </ion-list>
        
      </form>
    </ion-col>

    <ion-list *ngIf="this.isOwner">
      <ion-item class="block">
        <ion-text [color]="editUserForm.controls['password'].errors?.['PasswordNoUppercase'] ? 'danger' : 'success'" >Au moins une lettre majuscule.</ion-text>
      </ion-item>
      <ion-item class="block">
        <ion-text [color]="editUserForm.controls['password'].errors?.['PasswordNoLowercase'] ? 'danger' : 'success'" >Au moins une lettre minuscule.</ion-text>
      </ion-item>
      <ion-item class="block">
        <ion-text [color]="editUserForm.controls['password'].errors?.['PasswordNoDigit'] ? 'danger' : 'success'" >Au moins un chiffre.</ion-text>
      </ion-item>
      <ion-item class="block">
        <ion-text [color]="editUserForm.controls['password'].errors?.['PasswordNoSpecial'] ? 'danger' : 'success'" >Au moins un caractère spécial.</ion-text>
      </ion-item>
      <ion-item class="block">
        <ion-text [color]="editUserForm.controls['password'].errors?.['PasswordTooShort'] ? 'danger' : 'success'" >Une longueur d'au moins 8 caractères.</ion-text>
      </ion-item>
      <ion-item class="block">
        <ion-text [color]="editUserForm.errors?.['PasswordNoMatch'] ? 'danger' : 'success'" >Les deux Mots de Passe doivent correspondrent.</ion-text>
      </ion-item>
    </ion-list>
  </ion-item>
  
</ion-content>